<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Import Test</title>
</head>
<body>
    <h1>Simple Import Test</h1>
    <div id="output"></div>

    <script type="module">
        import { VCardStandard } from './src/core/VCardStandard.js';

        const vCardStandard = new VCardStandard();
        const output = document.getElementById('output');

        function log(message) {
            const div = document.createElement('div');
            div.textContent = message;
            output.appendChild(div);
            console.log(message);
        }

        try {
            // Test normal vCard import
            const sampleVCard = `BEGIN:VCARD
VERSION:4.0
FN:Test Import Contact
TEL;TYPE=work:555-1234
EMAIL;TYPE=work:test@example.com
END:VCARD`;

            log('Testing vCard import...');
            
            const importedContact = vCardStandard.importFromVCard(sampleVCard, 'Test Import');
            log('Import successful!');
            log('Contact ID: ' + importedContact.contactId);
            log('Card Name: ' + importedContact.cardName);
            log('Is Imported: ' + (importedContact.metadata.isImported === true ? 'YES' : 'NO'));
            log('Metadata: ' + JSON.stringify(importedContact.metadata, null, 2));

            // Test Apple vCard import
            const appleVCard = `BEGIN:VCARD
VERSION:3.0
FN:Apple Test Contact
TEL;TYPE=WORK:555-5678
EMAIL;TYPE=WORK:apple@example.com
END:VCARD`;

            log('\\nTesting Apple vCard import...');
            
            const appleImportedContact = vCardStandard.importFromVCard(appleVCard, 'Apple Import');
            log('Apple import successful!');
            log('Contact ID: ' + appleImportedContact.contactId);
            log('Card Name: ' + appleImportedContact.cardName);
            log('Is Imported: ' + (appleImportedContact.metadata.isImported === true ? 'YES' : 'NO'));
            log('Import Source: ' + (appleImportedContact.metadata.importSource || 'Not specified'));

        } catch (error) {
            log('ERROR: ' + error.message);
            console.error('Import test failed:', error);
        }
    </script>
</body>
</html>