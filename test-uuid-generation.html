<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UUID Generation Test</title>
</head>
<body>
    <h1>UUID Generation Test</h1>
    <button id="testButton">Test Contact ID Generation</button>
    <div id="results"></div>

    <script type="module">
        import { VCardStandard } from './src/core/VCardStandard.js';

        const vCardStandard = new VCardStandard();
        const testButton = document.getElementById('testButton');
        const resultsDiv = document.getElementById('results');

        testButton.addEventListener('click', () => {
            // Generate 10 contact IDs to check for uniqueness
            const ids = [];
            for (let i = 0; i < 10; i++) {
                ids.push(vCardStandard.generateContactId());
            }

            // Check for duplicates
            const uniqueIds = new Set(ids);
            const hasDuplicates = uniqueIds.size !== ids.length;

            resultsDiv.innerHTML = `
                <h2>Test Results:</h2>
                <p><strong>Generated ${ids.length} IDs</strong></p>
                <p><strong>Unique IDs: ${uniqueIds.size}</strong></p>
                <p><strong>Has duplicates: ${hasDuplicates ? 'YES ❌' : 'NO ✅'}</strong></p>
                
                <h3>Generated IDs:</h3>
                <ul>
                    ${ids.map(id => `<li><code>${id}</code></li>`).join('')}
                </ul>
                
                <h3>UUID Format Check:</h3>
                <p>All IDs should start with 'contact_' and contain a valid UUID v4</p>
                ${ids.map(id => {
                    const uuidPart = id.replace('contact_', '');
                    const isValidFormat = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(uuidPart);
                    return `<p><code>${id}</code> - ${isValidFormat ? '✅ Valid' : '❌ Invalid'}</p>`;
                }).join('')}
            `;
        });
    </script>
</body>
</html>